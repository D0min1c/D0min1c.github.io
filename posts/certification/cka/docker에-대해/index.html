<!doctype html><html><head><title>Dockerì— ëŒ€í•´</title><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=x-ua-compatible content="ie=edge"><link rel=stylesheet href=/css/bootstrap.min.css><link rel=stylesheet href=/css/layouts/main.css><link rel=stylesheet href=/css/navigators/navbar.css><link rel=stylesheet href=/css/plyr.css><link rel=stylesheet href=/css/flag-icon.min.css><link href="https://fonts.googleapis.com/css2?family=Muli:wght@300;400;500;600" rel=stylesheet><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/all.min.css><link rel=icon type=image/png href=/images/site/favicon_hu1d79931af21da1953430965fd067c561_13812_42x0_resize_q75_box.JPG><meta property="og:title" content="Dockerì— ëŒ€í•´"><meta property="og:description" content="Sample post with multiple images, embedded video ect."><meta property="og:type" content="article"><meta property="og:url" content="https://hugo-toha.github.io/posts/certification/cka/docker%EC%97%90-%EB%8C%80%ED%95%B4/"><meta property="article:published_time" content="2020-06-20T00:00:00+00:00"><meta property="article:modified_time" content="2020-06-20T00:00:00+00:00"><meta name=description content="Sample post with multiple images, embedded video ect."><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.18.1/styles/atom-one-dark.min.css><link rel=stylesheet href=/css/layouts/single.css><link rel=stylesheet href=/css/navigators/sidebar.css><link rel=stylesheet href=/css/style.css><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-199142344-2','auto');ga('send','pageview');}</script></head><body data-spy=scroll data-target=#TableOfContents data-offset=80><div class="container-fluid bg-dimmed wrapper"><nav class="navbar navbar-expand-xl top-navbar final-navbar shadow"><div class=container><button class="navbar-toggler navbar-light" id=sidebar-toggler type=button onclick=toggleSidebar()>
<span class=navbar-toggler-icon></span></button>
<a class=navbar-brand href=/><img src=/images/site/main-logo_hu1d79931af21da1953430965fd067c561_13812_42x0_resize_q75_box.JPG alt=Logo>
255.255.248.0</a>
<button class="navbar-toggler navbar-light" id=toc-toggler type=button onclick=toggleTOC()>
<span class=navbar-toggler-icon></span></button><div class="collapse navbar-collapse lang-selector" id=top-nav-items><ul class="navbar-nav ml-auto"></ul></div></div><img src=/images/site/main-logo_hu1d79931af21da1953430965fd067c561_13812_42x0_resize_q75_box.JPG class=d-none id=main-logo alt=Logo>
<img src=/images/site/inverted-logo_hu1d79931af21da1953430965fd067c561_13812_42x0_resize_q75_box.JPG class=d-none id=inverted-logo alt="Inverted Logo"></nav><section class=sidebar-section id=sidebar-section><div class=sidebar-holder><div class=sidebar id=sidebar><form class=mx-auto method=get action=/search><input type=text name=keyword placeholder=Search data-search id=search-box></form><div class=sidebar-tree><ul class=tree id=tree><li id=list-heading><a href=/posts data-filter=all>Posts</a></li><div class=subtree><li><i class="fas fa-minus-circle"></i><a class=active href=/posts/certification/>Certification</a><ul class=active><li><i class="fas fa-minus-circle"></i><a class=active href=/posts/certification/cka/>CKA</a><ul class=active><li><a class=active href=/posts/certification/cka/docker%EC%97%90-%EB%8C%80%ED%95%B4/ title="Dockerì— ëŒ€í•´">Dockerì— ëŒ€í•´</a></li><li><a href=/posts/certification/cka/k8scomponent/ title=k8s(component)>k8s(component)</a></li><li><a href=/posts/certification/cka/k8sgke%EC%82%AC%EC%9A%A9%EA%B8%B0/ title=k8s(GKEì‚¬ìš©ê¸°)>k8s(GKEì‚¬ìš©ê¸°)</a></li><li><a href=/posts/certification/cka/k8snetworking/ title=k8s(Networking)>k8s(Networking)</a></li></ul></li></ul></li><li><i class="fas fa-plus-circle"></i><a href=/posts/cloud/>Cloud</a><ul><li><i class="fas fa-plus-circle"></i><a href=/posts/cloud/aws/>AWS</a><ul><li><a href=/posts/cloud/aws/awshost_issue/ title="ì„œë²„ê°€ ê°‘ìê¸° ë°•ì‚´ë‚˜ì…¨ìŠµë‹ˆë‹¤. -AWS">ì„œë²„ê°€ ê°‘ìê¸° ë°•ì‚´ë‚˜ì…¨ìŠµë‹ˆë‹¤. -AWS</a></li></ul></li><li><i class="fas fa-plus-circle"></i><a href=/posts/cloud/gcp/>GCP</a><ul><li><a href=/posts/cloud/gcp/gcpissue/ title="ì„œë²„ê°€ ê°‘ìê¸° ë°•ì‚´ë‚˜ì…¨ìŠµë‹ˆë‹¤. -GCP">ì„œë²„ê°€ ê°‘ìê¸° ë°•ì‚´ë‚˜ì…¨ìŠµë‹ˆë‹¤. -GCP</a></li></ul></li></ul></li><li><a href=/posts/about_dominic/ title=ğŸ˜About_dominicğŸ˜>ğŸ˜About_dominicğŸ˜</a></li><li><a href=/posts/shortcodes/ title="Shortcodes Sample">Shortcodes Sample</a></li></div></ul></div></div></div></section><section class=content-section id=content-section><div class=content><div class="container p-0 read-area"><div class="hero-area col-sm-12" id=hero-area style=background-image:url(https://hugo-toha.github.io/posts/certification/cka/docker%EC%97%90-%EB%8C%80%ED%95%B4/images/CKA_thumnail.jpg)></div><div class=page-content><div class="author-profile ml-auto align-self-lg-center"><img class=rounded-circle src=/images/author/dominic_hue8656283646074d0d4d459b13fee860e_56605_120x120_fit_box_2.png alt="Author Image"><h5 class=author-name>dominic</h5><p>June 20, 2020</p></div><div class=title><h1>Dockerì— ëŒ€í•´</h1></div><div class=post-content id=post-content><p>GCP í™˜ê²½ì—ì„œ dockerë¥¼ ì‚¬ìš©í•˜ì—¬ ì´ë¯¸ì§€ë¥¼ ë¹Œë“œí•˜ê³  ì‹¤í–‰í•´ë³´ê³ ,</p><p>GCR(Google Container Registry)ì— ê²Œì‹œí•´ë´…ì‹œë‹¤.</p><h2 id=ë°°ê²½>ë°°ê²½</h2><p>Docker ì»¨í…Œì´ë„ˆ ë¹Œë“œ, ì‹¤í–‰ê³¼ Docker Hub ë° Google Container Registryì—ì„œ Docker ì´ë¯¸ì§€ ê°€ì ¸ì˜¤ê¸°</p><p>ê·¸ë¦¬ê³  Dockerfileì„ í†µí•´ ì´ë¯¸ì§€ë¥¼ ìƒì„±í•˜ëŠ” ë²•ì— ëŒ€í•´ ê°„ë‹¨í•˜ê²Œ í™•ì¸í•´ë´¤ìŠµë‹ˆë‹¤.</p><p>Docker NetworkëŠ” k8s(Network) í¬ìŠ¤íŒ…ì„ ì°¸ê³  ë¶€íƒë“œë¦½ë‹ˆë‹¤.</p><h3 id=hello-world>Hello World</h3><p>GCPì—ì„œ ì œê³µí•˜ëŠ” Cloud shellì„ ì—´ì–´ Hello world ì»¨í…Œì´ë„ˆë¥¼ ì‹¤í–‰í•©ë‹ˆë‹¤.</p><pre><code>docker run hello-world

&lt;--ëª…ë ¹ì–´ ê²°ê³¼--&gt;
Unable to find image 'hello-world:latest' locally
latest: Pulling from library/hello-world
b8dfde127a29: Pull complete
Digest: sha256:9f6ad537c5132bcce57f7a0a20e317228d382c3cd61edae14650eec68b2b345c
Status: Downloaded newer image for hello-world:latest

Hello from Docker!
This message shows that your installation appears to be working correctly.

</code></pre><p>ì´ ì»¨í…Œì´ë„ˆëŠ” shellì— &ldquo;Hello from Docker!&ldquo;ë¼ëŠ” ë©”ì‹œì§€ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤. ê²°ê³¼ëŠ” ê°„ë‹¨í•˜ì§€ë§Œ ê²°ê³¼ê°€ ë‚˜ì˜¤ê¸° ì „ì— ì´ë¯¸ì§€ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ê³¼ì •ì„ í™•ì¸í•´ë´…ì‹œë‹¤.</p><p>ë¡œì»¬ì´ë¯¸ì§€ì— Hello worldì´ë¯¸ì§€ê°€ ì—†ê¸°ì— docker deamonì€ docker hubë¼ëŠ” public registryì—ì„œ í•´ë‹¹ ì´ë¯¸ì§€ë¥¼ pullí•˜ì—¬ ì»¨í…Œì´ë„ˆë¥¼ ìƒì„±í•˜ê³  ì‹¤í–‰í•˜ëŠ” ê³¼ì •ì„ í†µí•´ ìœ„ ë©”ì„¸ì§€ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.</p><p>docker hubì—ì„œ ê°€ì ¸ì˜¨ ì´ë¯¸ì§€ë¥¼ í™•ì¸í•´ë´…ì‹œë‹¤.</p><pre><code>docker images

&lt;--ëª…ë ¹ì–´ ê²°ê³¼--&gt;
REPOSITORY    TAG       IMAGE ID       CREATED        SIZE
hello-world   latest    d1165f221234   3 months ago   13.3kB
</code></pre><p>ì—¬ê¸°ì„œ ì•Œ ìˆ˜ ìˆëŠ” ì‚¬ì‹¤ì€ ë¡œì»¬ì— ì´ë¯¸ì§€ë¥¼ ê°€ì§€ê³  ìˆì§€ ì•Šì•„ë„ docker deamonì€ ì•Œì•„ì„œ docker hubë¼ëŠ” public registryì—ì„œ ì´ë¯¸ì§€ë¥¼ ê²€ìƒ‰í•œë‹¤ëŠ” ì ì…ë‹ˆë‹¤.</p><p>ì´ë¯¸ì§€ë¥¼ ë¡œì»¬ë¡œ Pullí•˜ì˜€ê¸°ì— ë‘ë²ˆì¨° ì‹¤í–‰ë¶€í„°ëŠ” ë°”ë¡œ ë¡œì»¬ì´ë¯¸ì§€ë¥¼ í†µí•´ ì»¨í…Œì´ë„ˆë¥¼ ìƒì„±, ì‹¤í–‰í•  ìˆ˜ ìˆëŠ” ê²ƒ ì…ë‹ˆë‹¤.
ìœ„ ì´ë¯¸ì§€ëŠ” echo &ldquo;Hello from Docker!&ldquo;ë¥¼ ì‹¤í–‰í•˜ê³  ì‚¬ë¼ì¡Œë„¤ìš” ë§ˆì¹˜ k8sì˜ jobsê°™ìŠµë‹ˆë‹¤. ì‹¤ì œë¡œ Docker ps -a ë¥¼ í†µí•´ ì»¨í…Œì´ë„ˆë¥¼ í™•ì¸í•´ë³´ë©´ ì»¨í…Œì´ë„ˆê°€ ì¢…ë£Œë˜ì—ˆìŒì„ ì•Œ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p><pre><code>docker ps -a

&lt;--ëª…ë ¹ì–´ ê²°ê³¼--&gt;
CONTAINER ID   IMAGE         COMMAND    CREATED              STATUS                          PORTS     NAMES
d36437eeb64a   hello-world   &quot;/hello&quot;   About a minute ago   Exited (0) About a minute ago             sweet_pare
359b95d41706   hello-world   &quot;/hello&quot;   2 minutes ago        Exited (0) 2 minutes ago                  happy_ritchie
</code></pre><p>docker runì„ ì‹œì‘í• ë•Œ ì˜µì…˜ìœ¼ë¡œ &ndash;nameì„ ì£¼ë©´ ë’¤ì— ë¬´ì‘ìœ„ë¡œ ë¶™ëŠ” Names ë¼ë²¨ì„ ì„¤ì •í•´ì¤„ ìˆ˜ ë„ ìˆìŠµë‹ˆë‹¤.</p><h3 id=dockerfile-build--run-test>DockerFile build / run Test</h3><p>Dockerfileì„ í†µí•´ ì§ì ‘ ì´ë¯¸ì§€ë¥¼ ë¹Œë“œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ê°„ë‹¨í•˜ê²Œ CentOSì— Httpdë¥¼ ë„ìš°ëŠ” Dockerfileì„ ì‘ì„±í•©ë‹ˆë‹¤.</p><pre><code>cat &gt; Dockerfile &lt;&lt;EOF
# CentOS7ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤.
FROM centos:7

# ì»¨í…Œì´ë„ˆì—ì„œ http íŒ¨í‚¤ì§€ë¥¼ ì„¤ì¹˜í•´ì¤ë‹ˆë‹¤.
RUN yum -y install httpd 

# í˜„ì¬ ë””ë ‰í† ë¦¬ì˜ ë‚´ìš©ì„ ì»¨í…Œì´ë„ˆ ë‚´ë¶€ë¡œ ë³µì‚¬í•©ë‹ˆë‹¤.
ADD /write-http.sh /write-http.sh

# ì»¨í…Œì´ë„ˆì—ì„œ write-http.shë¥¼ ì‹¤í–‰í•  ìˆ˜ìˆë„ë¡ ê¶Œí•œì„ ë³€ê²½í•©ë‹ˆë‹¤.
RUN chmod 755 /write-http.sh

# ì„œë¹„ìŠ¤ë¥¼ ìœ„í•´ ì»¨í…Œì´ë„ˆì˜ í¬íŠ¸ 80ì„ ì™¸ë¶€ì— ê³µê°œí•©ë‹ˆë‹¤.
EXPOSE 80

# ì»¨í…Œì´ë„ˆê°€ ì‹œì‘ë  ë•Œ write-http.sh ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì‹¤í–‰í•©ë‹ˆë‹¤.
ENTRYPOINT [&quot;sh&quot;,&quot;/etc/write-http.sh&quot;]

EOF
</code></pre><pre><code># write-http.sh ë‚´ìš©
#!/bin/sh
/usr/sbin/httpd -D FOREGROUND
</code></pre><p>ì´ë¯¸ì§€ë¥¼ ë¹Œë“œí•˜ì—¬ ì»¨í…Œì´ë„ˆì— ë„ì›Œë³´ë©´ ì•„ë˜ì™€ ê°™ì´ ì»¨í…Œì´ë„ˆê°€ ìƒì„±ë¨ì„ ì•Œ ìˆ˜ ìˆë‹¤.</p><pre><code>docker build -t dominic-web:0.1 .

&lt;--ëª…ë ¹ì–´ ê²°ê³¼--&gt;
Sending build context to Docker daemon  3.072kB
Step 1/6 : FROM centos:7.5.1804
 ---&gt; cf49811e3cdb
Step 2/6 : RUN yum -y install httpd
 ---&gt; Using cache
 ---&gt; b04936c42e77
Step 3/6 : ADD /write-http.sh /write-http.sh
 ---&gt; 79d1a552ea2a
Step 4/6 : RUN chmod 755 /write-http.sh
 ---&gt; Running in 9041f099a392
Removing intermediate container 9041f099a392
 ---&gt; 96ce83e42fce
Step 5/6 : EXPOSE 80
 ---&gt; Running in eb46efbe7e84
Removing intermediate container eb46efbe7e84
 ---&gt; b39def1a021e
Step 6/6 : ENTRYPOINT [&quot;sh&quot;,&quot;/etc/write-http.sh&quot;]
 ---&gt; Running in 7e258ee5d665
Removing intermediate container 7e258ee5d665
 ---&gt; d3924f695483
Successfully built d3924f695483
Successfully tagged dominic-web:0.1
</code></pre><pre><code>docker images
&lt;--ëª…ë ¹ì–´ ê²°ê³¼--&gt;
REPOSITORY    TAG        IMAGE ID       CREATED          SIZE
dominic-web   0.1        d3924f695483   40 seconds ago   353MB
</code></pre><p>ì´í›„ docker run commandë¥¼ í†µí•´ ì´ë¯¸ì§€ë¥¼ ì»¨í…Œì´ë„ˆì— ì‹¤í–‰ì‹œí‚¤ë©´ ëœë‹¤.</p><pre><code>docker run -d -p 80:80 dominic-web:0.1
</code></pre><p>-d ì˜µì…˜ì„ ì•ˆì£¼ë©´ Foregroundì—ì„œ ë™ì‘í•˜ê¸°ì— ì‰˜ì„ ì›€ì§ì„ ìˆ˜ê°€ ì—†ìœ¼ë‹ˆ, -d ì˜µì…˜ìœ¼ë¡œ ë„ì»¤ ì»¨í…Œì´ë„ˆê°€ backgroundì—ì„œ ë™ì‘ë  ìˆ˜ ìˆë„ë¡ í•©ì‹œë‹¤!</p><p>ë§Œì•½ ë‹¤ë¥¸ ë²„ì „ì˜ ì´ë¯¸ì§€ë¥¼ ìƒì„±í•˜ê³  ì‹¶ë‹¤ë©´ ê°„ë‹¨í•©ë‹ˆë‹¤. ê·¸ëƒ¥ ë¹Œë“œí• ë•Œ, íƒœê·¸ë¥¼ ë‹¬ë¦¬í•´ì£¼ë©´ ëœë‹¤.</p><pre><code>docker build -t dominic-web:0.2 .
</code></pre><p>ì´í›„ ë¹Œë“œë¥¼í•˜ë©´ ê¸°ì¡´ì— ìºì‹œë˜ì–´ìˆë˜ ë ˆì´ì–´ëŠ” ë„˜ì–´ê°€ê³  ë³€ê²½ì‚¬í•­ì´ ìƒê¸´ ë ˆì´ì–´ì—ì„œ ìˆ˜ì •ì´ ë°œìƒí•¨ì„ ì•Œ ìˆ˜ ìˆì„ ê²ƒì…ë‹ˆë‹¤.</p><h3 id=ê²°ê³¼->ê²°ê³¼ !</h3><p>curlë¡œ í™•ì¸í•´ë³´ë‹ˆ, httpd default pageê°€ ì«™~~ë‚˜ì˜¤ë„¤ìš”. ë‹¤ìŒì—” index.htmlì„ ì¢€ ì¶”ê°€í•´ì•¼ë ë“¯ ã…ã…;</p><p>ê°„ë‹¨í•˜ê²Œ docker í…ŒìŠ¤íŠ¸ ì§„í–‰í•´ë´¤ë‹¤.</p><p>ì´í›„ docker pushë¥¼ í†µí•´ ë‚´ GCRë¡œ ì´ë¯¸ì§€ë¥¼ í‘¸ì‰¬í•˜ëŠ”ê±°ê¹Œì§€ ì§„í–‰í•˜ì˜€ìœ¼ë‚˜, ê·¸ë¶€ë¶„ì€ Docsë¡œ ëŒ€ì²´í•˜ê² ë‹¤.</p><p><a href=https://cloud.google.com/container-registry/docs/pushing-and-pulling>ì´ë¯¸ì§€ ë‚´ë³´ë‚´ê¸°</a></p></div><hr><div class="row next-prev-navigator"></div><hr></div></div></div><a id=scroll-to-top class=btn><i class="fas fa-chevron-circle-up"></i></a></section><section class=toc-section id=toc-section><div class=toc-holder><h5 class="text-center pl-3">Table of Contents</h5><hr><div class=toc><nav id=TableOfContents><ul><li><a href=#ë°°ê²½>ë°°ê²½</a><ul><li><a href=#hello-world>Hello World</a></li><li><a href=#dockerfile-build--run-test>DockerFile build / run Test</a></li><li><a href=#ê²°ê³¼->ê²°ê³¼ !</a></li></ul></li></ul></nav></div></div></section></div><script type=text/javascript src=/js/jquery-3.4.1.min.js></script><script type=text/javascript src=/js/popper.min.js></script><script type=text/javascript src=/js/bootstrap.min.js></script><script type=text/javascript src=/js/navbar.js></script><script type=text/javascript src=/js/plyr.js></script><script type=text/javascript src=/js/main.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.18.1/highlight.min.js></script><script src=/js/single.js></script><script>hljs.initHighlightingOnLoad();</script></body></html>