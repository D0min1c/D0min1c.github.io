---
title: 아니 글쎄 갑자기 인스턴스가 죽었다니까요? - GCP
categories:
  - "GCP"
tags:
  - "gcp"
  - "public cloud"
---
마른하늘의 날벼락 같은 인스턴스 Reboot 현상에 대해 원인과 경험을 적어놨습니다. (feat.짧은 글)

<!--more-->

## 배경
GCP 혹은 AWS를 사용하면서 종종 Host Error! 혹은 Instance check Failed를 경험한 적이 있으시죠?
GCP를 기준으로 이슈에 대해 정리해보았습니다. 짧습니다.

##  GCP Maintenance

GCP의 Compute Engine은 소프트웨어 또는 하드웨어 업데이트와 같은 호스트 시스템 이벤트가 발생하더라도 가상 머신 인스턴스가 계속 실행될 수 있게 해주는 라이브 마이그레이션 기능을 제공합니다.

Compute Engine은 사용자가 VM을 재부팅할 필요 없이 동일 영역에서 실행 중인 인스턴스를 또 다른 호스트로 라이브 마이그레이션합니다.

 이렇게 해서 Google은 사용자의 VM에 영향을 주지 않으면서도 인프라를 보호하고 안정적인 상태로 유지하는 데 반드시 필요한 유지보수를 수행할 수 있습니다. (GPU가 연결된 인스턴스는 불가능하다는 점 !)

GCP도 역시 Host Error가 발생합니다. 자동으로 올라오지만, 마찬가지로 모니터링 및 트리거를 걸어 Reboot try 로직을 걸어두심이 좋습니다.

다시한번 말하지만 세상에 100% 안죽는 서버는 없습니다.  ~~(사장님 이젠 죽을거 같습니다)~~

그렇게 때문에 항상 DR 프로세스에 대한 준비는 해두어야합니다. 이것은 클라우드 위의 인프라도 마찬가지 입니다.

클라우드는 공동 책임 모델 등 SLA를 명확하게 보여주기에 어느정도의 가용성을 보장하는지가 알려줍니다.

가령 99.999%를 보장하는 서비스는 최소 1년에 0.001%의 보장할 수 없는 서비스 중단시간이 발생할 수 있다는 소리입니다.

31536초면 약 9시간쯤 되겠네요.

서비스 데이터의 내결함성을 보장할 수 있도록 주기적인 Backup을 진행하는 것은 너무나 중요합니다.

RPO와 RTO를 정의하세요. 그리고 성공적인 복구 프로세스에 대해 고민과 적용을 하여 경험을 쌓아야 합니다.

이미 리붓된 서버를 원망하기보다 어떻게하면 장애시간을 최소한으로 줄일 수 있을지에 대한 고민이 정신건강에 이롭습니다.

감사합니다.

