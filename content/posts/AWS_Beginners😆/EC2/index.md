---
title: "비기너라면 알아두어야 할 EC2"
date: 2021-07-05
description: Sample post with multiple images, embedded video ect.
menu:
  sidebar:
    name: 1. EC2의 모든 것
    identifier: AWS_EC2
    parent: AWS_Beginners😆
    weight: 1
hero: images/host_thumnail.jpg
---
AWS를 사용하시려는 모든 유저분들이 간단히 보기에 좋은 내용입니다. AWS Docs는 너무 어려워...! 그렇다면 들어오세요.

<!--more-->

## 배경
AWS를 시작하시는 분들을 위해 간단하게 EC2 라는 서비스에 대해 정리해보았습니다.
가상화나 상세 기술내용은 도려낸 핵심적인 내용만 담아봤습니다.

### EC2 개념 (Elastic Compute Cloud) (AKA. 인스턴스)

![This is an image](images/instance.jpg)


AWS에서 운영하는 데이터 센터 내 여러 Host Server 위에 Hypervisor라 불리우는 소프트웨어를 통해
하드웨어의 리소스에서 가상머신의 리소스를 분리하고 프로비저닝하여 사용자에게 제공합니다.

현재 AWS에서 EC2 가상화 종류에 따라 최신세대 인스턴스 (Nitro Type이라 불리는 KVM 기반 Hypervisor), 이전세대 인스턴스 (Xen 기반 Hypervisor)로 나뉩니다.

이러한 VM들을 AWS에서는 EC2라는 이름으로 사용자에게 제공합니다.

### EC2 계산 (Elastic Compute Cloud) (AKA. 인스턴스)
기본적으로 클라우드 컴퓨팅은 사용한 만큼 비용을 지불하는 방식이 적용됩니다. 마치 PC방처럼요.

그런데, 제공함에 있어 비용적으로 선택할 수 있는 옵션이 4가지 있습니다.
1. On-demand : 사용한 만큼 비용 지불 (초 당 비용으로 지불되며 최소 60초(1분)가 적용됩니다.)

2. Spot : 낚시와 비슷한 개념입니다.
AWS에서는 남는 EC2 유휴자원들을 시장에 싼값에 내놓습니다. 고정된 가격이 아니기에,
사용자는 인스턴스별 시간당 지불하려는 최고 가격을 설정해두어 지불하려는 최고 가격이 스팟 가격을 초과하고 사용 가능한 용량이 있는 경우 스팟 인스턴스가 시작됩니다. 이말인 즉슨 지불하려는 가격보다 인스턴스가 비싸지면 인스턴스가 종료될 수도 있다는 말입니다.
예전에는 볼륨과 함께 인스턴스가 증발했지만, 이젠 EBS를 따로 보호할 수 있는 옵션도 생겼기에, 나쁘지 않은 조건이라고 생각합니다.


![This is an image](images/spot.jpg)

다만 실 서비스에서는 온디멘드 인스턴스나 RI같은 고정적인 인스턴스와 함께 사용하는 것이 일반적입니다.

3. RI : Reserved Instance의 약자로 컴퓨팅을 미리 예약해두고 사용하는 것입니다. 1년 2년 약정형식으로 동일 스펙의 On-demand 인스턴스에 비해 약 75% 비용 절감 효과를 얻을 수 있습니다. 일반적으로 같은 인스턴스 패밀리 내에서는 사이즈를 변경할 수 있지만, 다른 인스턴스 패밀리로 변경하고자한다면 Convertible RI로 구매하셔야합니다. (호텔 장기투숙과 비슷)

4. Saving Plan : RI와 비슷한 개념입니다만, RI는 연간 컴퓨팅을 쓰던 안쓰던 비용이 청구되는 방식이지만, Saving Plan은 시간 당 비용으로 계약하기에 실제 사용량에 대해서 청구됩니다.(m4.xlarge인스턴스를 시간당 10달러로 6개월 계약 / PC방 후불제와 비슷)

단순 컴퓨팅 비용에서만 계산하는 방식이였습니다. 이외에도 서버를 운영하기 위해서는 Network Traffic 비용, EBS 볼륨비용 등 추가적인 요소들이 존재합니다.

### EC2를 구성하는 요소들
EC2를 생성하려했더니, 선택해야할 옵션이 너무 많아보입니다. 간단하게 설명해드리겠습니다.

![This is an image](images/ami.jpg)

1. AMI(Amazon Machine Image) : AMI는 인스턴스를 시작하는 데 필요한 소프트웨어 구성(운영 체제, 애플리케이션 서버, 애플리케이션)이 포함된 템플릿입니다. VM에 설치될 OS와 내부 패키지 구성까지 포함되어있는 템플릿이라고 보시면됩니다. 그러니까.. Window CD같은..

2. 인스턴스 타입 : 위에서 언급된 인스턴스 패밀리의 개념입니다.
t시리즈, m시리즈, c시리즈 처럼 인스턴스는 성능과 특징에 따라 이니셜링되어 서비스됩니다.
각 인스턴스 패밀리 별 특장점은 AWS Docs에서 자세히 설명되어있기에 따로 다루진 않겠습니다.

3. 인스턴스 세부 정보 : 생성할 인스턴스의 갯수, 네트워크 구성(VPC,subnet,ENI)등을 설정합니다.
각각의 항목들이 복잡하지만 중요 구성요소는 네트워크 설정입니다. VPC와 서브넷에 대해서는 AWS Networking 포스팅을 참고하시면 좋습니다.
 
4. 스토리지 추가 : 인스턴스에 디스크를 추가합니다. HDD, SSD 같은 유형을 지원합니다. 이외에도 인스턴스스토어 라는 개념이 존재합니다.
인스턴스의 루트 디바이스에는 인스턴스 부팅에 사용되는 이미지가 포함되어 있습니다.

5. 보안 그룹 : 보안 그룹은 인스턴스에 대한 트래픽을 제어하는 방화벽 규칙 세트입니다. 이 페이지에서는 특정 트래픽을 인스턴스에 도달하도록 허용할 규칙을 추가할 수 있습니다. 예를 들면 웹 서버를 설정하여 인터넷 트래픽을 인스턴스에 도달하도록 허용하려는 경우 HTTP 및 HTTPS 트래픽에 대한 무제한 액세스를 허용하는 규칙을 추가합니다.

6. Key-pair 발급 : 기존에 사용하던 키페어가 없으시면 새로운 키페어를 생성하시면 됩니다. 실제 생성되는 VM 내 RSA공개키를 저장해두고 다운로드 받은 개인키를 ssh 접근시 사용하여 VM 내 접속합니다.

위 6가지 구성요소를 통해 진행하시면 여러분은 AWS에서 1대의 인스턴스를 제공받고 접근까지 가능하게 되었습니다.

### 프리티어
마지막으로 AWS에서는 신규 가입 고객에게 가입한 날로부터 12개월, 혹은 상시로 무료 제공하는 일부 서비스가 있습니다.
이를 "프리티어"라고 부르기는 합니다만, Free라고해서 방심하시면 요금폭탄을 맞기 딱 좋기에 서비스를 생성하기 전 요금을 꼭 확인해보고 생성하시길 바랍니다.

### 결론
AWS EC2에 대해 간단하게 살펴봤습니다. 각 요소들에 대해 상세한 내용은 이어지는 포스팅을 참고해주시길 바라겠습니다.
