<!doctype html><html class=no-js lang=en-us><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=theme-color content="#1b1b1b"><title>CKA 준비-2 (compenent) | 255.255.248.0</title><script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script><meta name=description content><meta property="og:title" content="CKA 준비-2 (compenent)"><meta property="og:description" content="2021-06-15부터 CKA 취득을 위해 이론적으로 공부한 내용들을 기록하였습니다."><meta property="og:type" content="article"><meta property="og:url" content="https://21sub.net/post/cka/cka_%EC%A4%80%EB%B9%84-2210621/"><meta itemprop=name content="CKA 준비-2 (compenent)"><meta itemprop=description content="2021-06-15부터 CKA 취득을 위해 이론적으로 공부한 내용들을 기록하였습니다."><meta itemprop=wordCount content="488"><meta itemprop=keywords content="k8s,CKA,Kubernetes,"><meta name=twitter:card content="summary"><meta name=twitter:title content="CKA 준비-2 (compenent)"><meta name=twitter:description content="2021-06-15부터 CKA 취득을 위해 이론적으로 공부한 내용들을 기록하였습니다."><link rel=stylesheet href=/css/bundle.css><link rel=stylesheet href=/css/custom.css><link rel=icon href=/icons/16.png sizes=16x16 type=image/png><link rel=icon href=/icons/32.png sizes=32x32 type=image/png><link rel=manifest href=/manifest.json><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-199142344-2','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script></head><body class="body kind-page"><header class=header><a class=logo href=/>255.255.248.0</a><nav class="main-nav main-nav--right" role=navigation><button id=toggle class=main-nav__btn aria-label="Menu toggle" aria-expanded=false tabindex=0><div class=main-nav__btn-box tabindex=-1><svg class="main-nav__icon icon-menu" width="18" height="18" viewBox="0 0 18 18"><path class="icon-menu__burger" d="M18 0v3.6H0V0h18zM0 10.8h18V7.2H0v3.6zM0 18h18v-3.6H0V18z"/><path class="icon-menu__x" d="M11.55 9 18 15.45 15.45 18 9 11.55 2.55 18 0 15.45 6.45 9 0 2.55 2.55.0 9 6.45 15.45.0 18 2.55 11.55 9z"/></svg></div></button><ul id=menu class=main-nav__list><li class=main-nav__item><a class=main-nav__link href=/about_dominic/><span class=main-nav__text>About Dominic</span></a></li><li class=main-nav__item><a class=main-nav__link href=/post/certificate/aws-saa/><span class=main-nav__text>AWSKRUG beginner group Study 관련</span></a></li></ul></nav></header><div class=primary><main class=main><nav class="breadcrumb block" aria-label=breadcrumb><ol class=breadcrumb__list><li class=breadcrumb__item><a class=breadcrumbs__link href=/>21sub.net</a></li><li class=breadcrumb__item><a class=breadcrumbs__link href=/post/>Posts</a></li><li class="breadcrumbs__item breadcrumb__item--active" aria-current=page>CKA 준비-2 (compenent)</li></ol></nav><div class="single block"><article class=entry><div class="entry__meta meta mb"><span class="entry__meta-categories meta-categories"><span class=meta-categories__list>Categories:
<a class=meta-categories__link href=/categories/cka/ rel=category>CKA</a></span></span></div><h1 class=entry__title>CKA 준비-2 (compenent)</h1><div class=entry__content><p>2021-06-15부터 CKA 취득을 위해 이론적으로 공부한 내용들을 기록하였습니다.</p><h2 id=배경>배경</h2><p>지난 주까지 간략하게 훑어봤다. 주요 컴포넌트와 내용을 정리해보았다.</p><h2 id=2021-06-21-공부한-내용>2021-06-21 공부한 내용</h2><h4 id=k8s-아키텍쳐>k8s 아키텍쳐</h4><p><img src=/img/k8s_arch.jpg alt="This is an image"></p><pre><code>환경 : Amazon Linux 2 (t2 패밀리)
k8s version : v1.21
설치 방법 : Kubeadm | CNI : Calico

</code></pre><p><img src=/img/docker_info.jpg alt="This is an image"></p><ul><li><p>도커 설치 직후 상태</p></li><li><p>Master node와 worker Node로 구성됨</p><ul><li>master node 구성 : API server, Scheduler, Controller, etcd (클러스터의 상태, 컨테이너설정, 네트워킹 구성 등 관리)
-각 control plane component들은 뒤에서 상세히 다룰 에정.</li><li>Worker node 구성 : kubelet, kube-proxy</li></ul></li><li><p>k8s 동작 방식</p><ul><li>API server를 통해 API를 노출한다. Kubectl이라는 로컬 클라이언트를 사용하여 API와 통신한다.</li><li>Scheduler는 이러한 API들을 적절한 노드로 할당해주는 스케줄링 작업을 담당한다.</li><li>각 worker node들에서 kubelet은 컨테이너 실행 요청을 수신하고 필요한 리소스들을 관리한다.</li><li>각 worker node들에서 kube-proxy는 컨테이너의 네트워크를 담당한다.</li></ul></li></ul><h3 id=k8s-component>k8s Component</h3><ol><li>Control Plane</li></ol><ul><li>worker node와 클러스터 내 파드를 관리<ul><li>kube-scheduler : 정의된 replicaset의 요구조건 충족, 노드가 배정되지않은 파드의 배치 등등 worker node에 있는 Pod를 스케줄링하는 역할</li><li>kube-apiserver : Control Plane의 FE / API를 노출하는 역할 / k8s Cluster와 상호작용을 위한 api 서버</li><li>etcd : 클러스터의 상태를 저장하여 일관성을 유지한다. (Data store) / Master Cluster에서 k8s object 저장소로 사용</li><li>kube-controller-manager :Deployments나 replcation Controller등 관리<ul><li>node-controller</li><li>replication-controller</li><li>endpoint-controller</li><li>service-account&token-controller</li></ul></li><li>cloud-controller-manager :Public Cloud Provider 연동 관리<ul><li>node-controller</li><li>route-contoller</li><li>service-contoller</li></ul></li></ul></li></ul><ol start=2><li>Node Component</li></ol><ul><li>worker node 내 pod들을 유지<ul><li>Kubelet : k8s를 통해 생성된 Pod 내 컨테이너의 동작에 관여한다. 가령 정확한 스펙에 따라 동작하는지 등..</li><li>kube-proxy : 각 worker node에서 실행되는 proxy로 서비스의 개념을 구현한다. (Inbound,Outbound)</li><li>container runtime : docker, cri-o 등등..</li></ul></li></ul><ol start=3><li>CNI (Contanier Network Interface)</li></ol><ul><li>Pod가 생성되고 삭제될 때, 호출되는 API의 규격과 인터페이스를 정의해준다. (그니까.. Pod Network를 구축하는 플러그인들)</li><li>CNI마다 기본적으로 차지하는 리소스가 있기에 목적에 맞게..사용해야한다. <strong>이미 훌륭하신분들이 테스트한 자료가 구글에&mldr;!!</strong></li><li>결론적으로 성능이 잘 나와야하고, 부가기능(ACL)을 지원하는 등 목적에 맞게 선택해야 된다. <del>영원한 선택의 늪</del></li></ul><h3 id=k8s-object>k8s Object</h3><ul><li><p>Pod : Worker Node 내 컨테이너들의 집합 (비영구적이다.)</p><ul><li>하나의 pod에는 한개 이상의 서비스로 지정될 수 있다.</li><li>각각의 pod에는 veth가 할당됨 (파드내 컨테이너들은 veth, PID, 를 공유 [누가?! pause 컨테이너])</li></ul></li><li><p>Service : Label로 묶어서 Endpoint를 노출시킴</p></li><li><p>configmap : pod에 담겨진 컨테이너에서 사용되는 구성 값</p></li><li><p>secret : 특수 볼륨에 연결되어 컨테이너에서 사용가능 (mysql 패스워드 같은것들을 저장해두고 환경변수로 가져오는 방식으로 사용)</p></li><li><p>deployment Controller : pod 배포 및 관리에 사용하는 컨트롤러
: ReplicaSet을 자동으로 생성
: pod에 대한 Rolling 업데이트를 관리 (versioning)</p><ul><li>ReplicaSet : 사용자가 template에 명시해둔 Pod의 갯수를 유지한다.</li><li>StatefulSet : Pod별 고정된 identity 할당 (name, network id 등)</li><li>DamonSet : 모든 node에 배포되어 실행 (Node Selector로 정의하는 경우 일부 node에서 실행시키는 등 제어 가능, )
: 특정 노드 또는 모든 노드에 <strong>항상</strong> 실행되어 있어야 하는 특정 파드들을 관리한다. 가령 로그수집용도의 파드들..!</li><li>Jobs : batch성 작업들, 특성 task 실행을 위해 하나 이상의 pod를 생성해서 task를 실행한 후 완료되면 Pod를 제거한다. (순차, 동시실행 지원, 다만 Lifecycle설정필요)</li></ul></li><li><p>Volume : Pod에 연결되어 디렉토리 형태로 데이터를 저장 (파드 간 컨테이너끼리 공유하며 Pod와 동일한 수명주기를 가짐)</p></li><li><p>PersistentVolume : k8s에서 관리하는 저장소, Pod와 독립적은 수명주기를 가짐(사용자가 PVC를 정의하고 생성하면 대응하는 PV가 생기는 형식)</p></li></ul><h3 id=알아두면-좋을-3rt-party-tool>알아두면 좋을 3rt party tool</h3><ul><li>Helm : 사전 정의된 k8s 리소스에 대한 패키지</li><li>Kompose : docker compose를 K8s object로 변환</li></ul></div><footer class=entry__footer><div class=entry__tags><a class="entry__tag btn" href=/tags/k8s/>k8s</a>
<a class="entry__tag btn" href=/tags/cka/>CKA</a>
<a class="entry__tag btn" href=/tags/kubernetes/>Kubernetes</a></div></footer></article></div></main><div class="authorbox block"><div class=author><figure class=author__avatar><img class=author__img alt="Dominic avatar" src=/img/avatar.png height=90 width=90></figure><div class=author__body><div class=author__name>Dominic</div><div class=author__bio>Dominic's true identity is unknown. Maybe he is a cute fairy or slave :D</div></div></div></div><div class="related block"><h3 class=related__title>Related</h3><ul class=related__list><li class=related__item><a class=related__link href=/post/cka/cka_%EC%A4%80%EB%B9%84-1210615/>CKA 준비-1 (Netowking)</a></li><li class=related__item><a class=related__link href=/post/cka/cka_%EC%A4%80%EB%B9%84-3210622/>CKA 준비-3 (GKE 맛보기)</a></li><li class=related__item><a class=related__link href=/post/cka/cka/>CKA를 취득하기 위해 알아두어야 할 것들</a></li></ul></div><section class="comments block"><div id=disqus_thread></div><script type=application/javascript>var disqus_config=function(){};(function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById('disqus_thread').innerHTML='Disqus comments not available by default when the website is previewed locally.';return;}
var d=document,s=d.createElement('script');s.async=true;s.src='//'+"dominic"+'.disqus.com/embed.js';s.setAttribute('data-timestamp',+new Date());(d.head||d.body).appendChild(s);})();</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><a href=https://disqus.com class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a></section></div><footer class=footer><div class="footer__social social"><a class=social__link target=_blank rel="noopener noreferrer" href=https://www.instagram.com/seob.199b><svg class="social__icon" aria-label="Instagram" role="img" width="32" height="32" viewBox="0 0 512 512"><g fill="none" stroke-width="29"><rect height="296" rx="78" width="296" x="108" y="108"/><circle cx="256" cy="256" r="69"/></g><circle cx="343" cy="169" r="19"/></svg></a><a class=social__link target=_blank rel="noopener noreferrer" href=https://linkedin.com/in/hanseob-lee-9655781aa><svg class="social__icon" aria-label="LinkedIn" role="img" width="32" height="32" viewBox="0 0 512 512"><circle cx="142" cy="138" r="37"/><path stroke-width="66" d="M244 194v198M142 194v198"/><path d="M276 282c0-20 13-40 36-40 24 0 33 18 33 45v105h66V279c0-61-32-89-76-89-34 0-51 19-59 32"/></svg></a><a class=social__link target=_blank rel="noopener noreferrer" href=https://github.com/D0min1c><svg class="social__icon" aria-label="Github" role="img" width="32" height="32" viewBox="0 0 512 512"><path d="M335 499c14 0 12 17 12 17H165s-2-17 12-17c13 0 16-6 16-12l-1-50c-71 16-86-28-86-28-12-30-28-37-28-37-24-16 1-16 1-16 26 2 40 26 40 26 22 39 59 28 74 22 2-17 9-28 16-35-57-6-116-28-116-126 0-28 10-51 26-69-3-6-11-32 3-67 0 0 21-7 70 26 42-12 86-12 128 0 49-33 70-26 70-26 14 35 6 61 3 67 16 18 26 41 26 69 0 98-60 120-117 126 10 8 18 24 18 48l-1 70c0 6 3 12 16 12z"/></svg></a></div><div class=footer__copyright>© 2021 Binario. <span class=footer__copyright-credits>Powered by <a href=https://gohugo.io/ rel="nofollow noopener" target=_blank>Hugo</a> and <a href=https://github.com/vimux/binario rel="nofollow noopener" target=_blank>Binario</a> theme.</span></div></footer><script src=/js/menu.js></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.6/MathJax.js?config=TeX-AMS-MML_HTMLorMML" async></script><script src=/js/custom.js></script></body></html>