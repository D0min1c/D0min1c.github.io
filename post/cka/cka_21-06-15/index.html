<!doctype html><html class=no-js lang=en-us><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=theme-color content="#1b1b1b"><title>CKA 1-1 (21-06-15 빠르게 훑어보기 시작) | 255.255.248.0</title><script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script><meta name=description content><meta property="og:title" content="CKA 1-1 (21-06-15 빠르게 훑어보기 시작)"><meta property="og:description" content="2021-06-15부터 CKA 취득을 위해 이론적으로 공부한 내용들을 데일리로 기록하였습니다."><meta property="og:type" content="article"><meta property="og:url" content="https://21sub.net/post/cka/cka_21-06-15/"><meta itemprop=name content="CKA 1-1 (21-06-15 빠르게 훑어보기 시작)"><meta itemprop=description content="2021-06-15부터 CKA 취득을 위해 이론적으로 공부한 내용들을 데일리로 기록하였습니다."><meta itemprop=wordCount content="417"><meta itemprop=keywords content="k8s,CKA,Kubernetes,"><meta name=twitter:card content="summary"><meta name=twitter:title content="CKA 1-1 (21-06-15 빠르게 훑어보기 시작)"><meta name=twitter:description content="2021-06-15부터 CKA 취득을 위해 이론적으로 공부한 내용들을 데일리로 기록하였습니다."><link rel=stylesheet href=/css/bundle.css><link rel=stylesheet href=/css/custom.css><link rel=icon href=/icons/16.png sizes=16x16 type=image/png><link rel=icon href=/icons/32.png sizes=32x32 type=image/png><link rel=manifest href=/manifest.json><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-199142344-2','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script></head><body class="body kind-page"><header class=header><a class=logo href=/>255.255.248.0</a><nav class="main-nav main-nav--right" role=navigation><button id=toggle class=main-nav__btn aria-label="Menu toggle" aria-expanded=false tabindex=0><div class=main-nav__btn-box tabindex=-1><svg class="main-nav__icon icon-menu" width="18" height="18" viewBox="0 0 18 18"><path class="icon-menu__burger" d="M18 0v3.6H0V0h18zM0 10.8h18V7.2H0v3.6zM0 18h18v-3.6H0V18z"/><path class="icon-menu__x" d="M11.55 9 18 15.45 15.45 18 9 11.55 2.55 18 0 15.45 6.45 9 0 2.55 2.55.0 9 6.45 15.45.0 18 2.55 11.55 9z"/></svg></div></button><ul id=menu class=main-nav__list><li class=main-nav__item><a class=main-nav__link href=/about_dominic/><span class=main-nav__text>About Dominic</span></a></li><li class=main-nav__item><a class=main-nav__link href=/post/certificate/aws-saa/><span class=main-nav__text>AWSKRUG beginner group Study 관련</span></a></li></ul></nav></header><div class=primary><main class=main><nav class="breadcrumb block" aria-label=breadcrumb><ol class=breadcrumb__list><li class=breadcrumb__item><a class=breadcrumbs__link href=/>21sub.net</a></li><li class=breadcrumb__item><a class=breadcrumbs__link href=/post/>Posts</a></li><li class="breadcrumbs__item breadcrumb__item--active" aria-current=page>CKA 1-1 (21-06-15 빠르게 훑어보기 시작)</li></ol></nav><div class="single block"><article class=entry><div class="entry__meta meta mb"><span class="entry__meta-categories meta-categories"><span class=meta-categories__list>Categories:
<a class=meta-categories__link href=/categories/cka/ rel=category>CKA</a></span></span></div><h1 class=entry__title>CKA 1-1 (21-06-15 빠르게 훑어보기 시작)</h1><div class=entry__content><p>2021-06-15부터 CKA 취득을 위해 이론적으로 공부한 내용들을 데일리로 기록하였습니다.</p><h2 id=2021-06-15-공부한-내용>2021-06-15 공부한 내용</h2><h4 id=기본-개념>기본 개념</h4><ul><li>docker network 구조</li></ul><p><img src=/img/docker_net.jpg alt="This is an image"></p><p>이미지 출처 : <a href=https://coffeewhale.com/k8s/network/2019/04/19/k8s-network-01/>커피고래님 블로그</a></p><p>Host[eth0 -> docker0(bridge) -> veth0 -> container]
컨테이너를 새로이 배포할때마다 컨테이너에게 veth0라는 가상 네트워크 인터페이스를 할당하여</p><p>Docker0에 연결, linked virtual ethernet device pair로 컨테이너와 Bridge를 연결한다.</p><ul><li>eth0 : 실제 내 서버 (VM)에 붙어있는 네트워크 인터페이스 (그냥 physical network interface)</li></ul><p><img src=/img/docker_0.jpg alt="This is an image"></p><ul><li><p>docker0 : netmask는 /16으로 설정되었다. (ip도 자동할당)</p><ul><li>자동할당이지만 DHCP로 받은 IP는 아니고 Docker 내부로직에 의해 할당받은 IP이다. <del>(DHCP서버가 없는데 어떻게받아요 ㅠ)</del></li><li>virtual ethernet bridge의 역할을 한다. (brctl 명령어로 bridge id와 STP모드 그리고 현재 연결되어있는 컨테이너 갯수를 interface로 확인 할 수 있다.)</li><li>가상의 bridge(L2)container가 하나 생성되면 이 bridge에 container의 interface가 하나씩 binding 된다.
따라서, 같은 도커 호스트 내 컨테이너들은 이 docker0 덕분에 서로의 IP를 알면 통신이 가능한 상태이다. (localhost 통신 가능)</li><li>veth0 : container에 할당되는 가상 네트워크 인터페이스 (namespace를 통해 독립적인 network 할당되며 컨테이너에서 식별 불가능)</li></ul></li><li><p>docker Network 종류</p></li></ul><p><img src=/img/docker_brg.jpg alt="This is an image"></p><ul><li>bridge : 위 설명 중 docker0 내용과 동일 (각 컨테이너마다의 고유한 network namespace로 독립적인 영역 생성)
별다른 옵션을 주지않으면 기본설정됨</li></ul><p><img src=/img/docker_hst.jpg alt="This is an image"></p><ul><li><p>Host : 컨테이너가 Host의 네트워크를 사용한다. 위 이미지에서 실제 컨테이너는 3개가 구동중이지만, Host를 사용하는 apachehost 컨테이너는 Bridge를 사용하지 않고 바로 host를 사용하기에, docker0에 binding되지 않는것이다.</p></li><li><p>none : 인터페이스가 없는 컨테이너로 생성된다.</p></li><li><p>container : veth0를 공유한다. 기존에 생성되어있던 컨테이너의 네트워크 환경을 다른 컨테이너에도 동일하게 적용시켜 두개의 프로세스가 각각의 고립된 환경을 구성하면서 네트워크만 공유할 수 있습니다. (veth0 1대로 컨테이너 다수 운영가능)</p></li><li><p>link : 컨테이너에 할당되는 IP는 동적이므로 가령 Web-DB같이 컨테이너 간 연동 시, 문제가 생길 수 있다.
그렇기에 컨테이너 간 Link 방식으로 연동하면 IP가 변동되어도 연동을 유지할 수 있다.
다만, link 옵션은 동일한 docker host 내 존재하는 컨테이너 사이에서 유효하기 때문에 다수의 docker host를 운영할 때, 각각의 호스트 하위 컨테이너들의 연동을 Link로는 셋팅할 수 없다.</p></li><li><p>overlay : 그래서 오버레이가 있다. 오버레이 네트워크는 도커 호스트 간 컨테이너 통신을 가능하게 해준다.</p></li></ul><p><img src=/img/k8s_host.jpg alt="This is an image"></p><ul><li>k8s를 이루는 기본 단위 : pods (하나 이상의 컨테이너들의 집합)<ul><li><p>Pods(도커 호스트라고 생각해도 될듯..?) 내 컨테이너들은 기본적으로 localhost 통신</p></li><li><p>Pods 생성 간 보통 두가지의 use case로 나뉘는데, 파드와 컨테이너의 비율이 1:1 혹은 1:N</p><ul><li><p>전자의 경우 가장 일반적인 케이스이며, 쿠버로 파드를 관리하는 것으로 컨테이너에 대한 관리를 안해도되는 구조</p></li><li><p>후자의 경우 애플리케이션의 캡슐화, 즉 서비스 컨테이너 이외의 별도의 사이드카 컨테이너를 둘 경우이다. <del>(컨테이너 1은 진짜 웹 서비스용, 컨테이너2는 컨테이너1의 소스파일을 업데이트하는 용도..)</del></p></li></ul></li><li><p>각 파드는 특정 애플리케이션의 단일 인스턴스를 실행하기 위한 것이다. 더 많은 인스턴스를 실행하여 더 많은 전체 리소스를 제공하기 위해 애플리케이션을 수평적으로 확장하려면, 각 인스턴스에 하나씩, 여러 파드를 사용해야 한다. 쿠버네티스에서는 이를 일반적으로 레플리케이션 이라고 한다. 복제된 파드는 일반적으로 워크로드 리소스와 해당 컨트롤러에 의해 그룹으로 생성되고 관리된다.</p></li></ul></li></ul><p><strong>참고</strong> : cbr0 = docker0</p></div><footer class=entry__footer><div class=entry__tags><a class="entry__tag btn" href=/tags/k8s/>k8s</a>
<a class="entry__tag btn" href=/tags/cka/>CKA</a>
<a class="entry__tag btn" href=/tags/kubernetes/>Kubernetes</a></div></footer></article></div></main><div class="authorbox block"><div class=author><figure class=author__avatar><img class=author__img alt="Dominic avatar" src=/img/avatar.png height=90 width=90></figure><div class=author__body><div class=author__name>Dominic</div><div class=author__bio>Dominic's true identity is unknown. Maybe he is a cute fairy or slave :D</div></div></div></div><div class="related block"><h3 class=related__title>Related</h3><ul class=related__list><li class=related__item><a class=related__link href=/post/cka/cka_21-06-16/>CKA 1-2 (21-06-16 k8s아키텍쳐)</a></li><li class=related__item><a class=related__link href=/post/cka/cka_21-06-17/>CKA 1-3 (21-06-17 Pods, Template)</a></li><li class=related__item><a class=related__link href=/post/cka/cka_1%EC%A3%BC%EC%B0%A8%EC%A0%95%EB%A6%AC/>CKA 1주차 정리(Netowking)</a></li><li class=related__item><a class=related__link href=/post/cka/cka/>CKA를 취득하기 위해 알아두어야 할 것들</a></li></ul></div><section class="comments block"><div id=disqus_thread></div><script type=application/javascript>var disqus_config=function(){};(function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById('disqus_thread').innerHTML='Disqus comments not available by default when the website is previewed locally.';return;}
var d=document,s=d.createElement('script');s.async=true;s.src='//'+"dominic"+'.disqus.com/embed.js';s.setAttribute('data-timestamp',+new Date());(d.head||d.body).appendChild(s);})();</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><a href=https://disqus.com class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a></section></div><footer class=footer><div class="footer__social social"><a class=social__link target=_blank rel="noopener noreferrer" href=https://www.instagram.com/seob.199b><svg class="social__icon" aria-label="Instagram" role="img" width="32" height="32" viewBox="0 0 512 512"><g fill="none" stroke-width="29"><rect height="296" rx="78" width="296" x="108" y="108"/><circle cx="256" cy="256" r="69"/></g><circle cx="343" cy="169" r="19"/></svg></a><a class=social__link target=_blank rel="noopener noreferrer" href=https://linkedin.com/in/hanseob-lee-9655781aa><svg class="social__icon" aria-label="LinkedIn" role="img" width="32" height="32" viewBox="0 0 512 512"><circle cx="142" cy="138" r="37"/><path stroke-width="66" d="M244 194v198M142 194v198"/><path d="M276 282c0-20 13-40 36-40 24 0 33 18 33 45v105h66V279c0-61-32-89-76-89-34 0-51 19-59 32"/></svg></a><a class=social__link target=_blank rel="noopener noreferrer" href=https://github.com/D0min1c><svg class="social__icon" aria-label="Github" role="img" width="32" height="32" viewBox="0 0 512 512"><path d="M335 499c14 0 12 17 12 17H165s-2-17 12-17c13 0 16-6 16-12l-1-50c-71 16-86-28-86-28-12-30-28-37-28-37-24-16 1-16 1-16 26 2 40 26 40 26 22 39 59 28 74 22 2-17 9-28 16-35-57-6-116-28-116-126 0-28 10-51 26-69-3-6-11-32 3-67 0 0 21-7 70 26 42-12 86-12 128 0 49-33 70-26 70-26 14 35 6 61 3 67 16 18 26 41 26 69 0 98-60 120-117 126 10 8 18 24 18 48l-1 70c0 6 3 12 16 12z"/></svg></a></div><div class=footer__copyright>© 2021 Binario. <span class=footer__copyright-credits>Powered by <a href=https://gohugo.io/ rel="nofollow noopener" target=_blank>Hugo</a> and <a href=https://github.com/vimux/binario rel="nofollow noopener" target=_blank>Binario</a> theme.</span></div></footer><script src=/js/menu.js></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.6/MathJax.js?config=TeX-AMS-MML_HTMLorMML" async></script><script src=/js/custom.js></script></body></html>